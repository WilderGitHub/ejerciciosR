#definimos los colores
#cols <- c("#264653","#A69B4E",'#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd')
cols <- c("#875B52","#E76F51", "#8FA078", "#228176", "#E9C46A", "#59804D", "#F4A261", "#264653", "#BB8865", "#A69B4E", "#65453E", "#E24D28", "#73835D", "#11403B", "#A07918", "#354D2E", "#EF7A1A", "#47829A", "#8E5E3E", "#6F6734", "#902C14", "#3F4833", "#7EDDD3", "#864109", "#274754")
#dibujamos el streamgraph
ggplot(dfpais, aes(x = Periodo, y = Valor, fill = Sector)) +
geom_stream() +
scale_fill_manual(values = cols)#+
View(df)
View(df)
#Filtramos el pais y botamos otros que se estaba repitiendo
dfpais<-df%>%
filter(Pais=="Estados Unidos" & Sector!="Otros")
#definimos los colores
#cols <- c("#264653","#A69B4E",'#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd')
cols <- c("#875B52","#E76F51", "#8FA078", "#228176", "#E9C46A", "#59804D", "#F4A261", "#264653", "#BB8865", "#A69B4E", "#65453E", "#E24D28", "#73835D", "#11403B", "#A07918", "#354D2E", "#EF7A1A", "#47829A", "#8E5E3E", "#6F6734", "#902C14", "#3F4833", "#7EDDD3", "#864109", "#274754")
#dibujamos el streamgraph
ggplot(dfpais, aes(x = Periodo, y = Valor, fill = Sector)) +
geom_stream() +
scale_fill_manual(values = cols)#+
df<-import("DeudaOrigen.xlsx") %>% as_tibble()
#Filtramos el pais y botamos otros que se estaba repitiendo
dfacreedor<-df#%>%
#  filter(Acreedor=="CAF")
TotalAcreedores <-aggregate(Valor ~ Periodo+Acreedor, data = dfacreedor, FUN = sum, na.rm = TRUE)
#definimos los colores
cols <- c('#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd')
#dibujamos el streamgraph
#OJO ESTE PERIODO DEBE SER CONTINUO OE, ESO ESTABA ARRUINANDO
ggplot(TotalAcreedores, aes(x = Periodo, y = Valor, fill = Acreedor)) +
geom_stream() +
scale_fill_manual(values = cols)+
labs(title = "Desembolsos por pais",
subtitle = "(En millones de $us)",
caption  = "Fuente: BCB"
)
pacman::p_load(pacman,party,rio,tidyverse)
#Importamos el excel
BDsectores<-import("Tidy05oct.xlsx")%>% as_tibble
head(BDsectores)
##  1  ## SCATTERPLOT POR SECTORES
#Filtramos el sector
BDfiltrado<-BDsectores#%>%
#filter(SectorTesis=="PetroleoGas")
head(BDfiltrado)
#eLa variable lo volvemos tidy
#pairs(PIBs[,2:4])
BDfiltradoWide<-BDfiltrado%>%
pivot_wider(names_from = Variable, values_from = Valor)
#pivot_longer(cols = !Periodo, names_to = "SectorINECorto",values_to = "value")
pairs(BDfiltradoWide[,5:9],cex=1
#,col = BDfiltradoWide$SectorTesis,
,lower.panel=NULL)
##  1  ## SCATTERPLOT POR SECTORES
#Filtramos el sector
BDfiltrado<-BDsectores%>%
filter(SectorTesis=="PetroleoGas")
head(BDfiltrado)
#eLa variable lo volvemos tidy
#pairs(PIBs[,2:4])
BDfiltradoWide<-BDfiltrado%>%
pivot_wider(names_from = Variable, values_from = Valor)
pairs(BDfiltradoWide[,5:9],cex=1
#,col = BDfiltradoWide$SectorTesis,
,lower.panel=NULL)
#definimos los colores
#cols <- c('#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd')
cols <- c("#875B52","#E76F51", "#8FA078", "#228176", "#E9C46A", "#59804D", "#F4A261", "#264653", "#BB8865", "#A69B4E", "#65453E", "#E24D28", "#73835D", "#11403B", "#A07918", "#354D2E", "#EF7A1A", "#47829A", "#8E5E3E", "#6F6734", "#902C14", "#3F4833", "#7EDDD3", "#864109", "#274754")
#dibujamos el streamgraph
#OJO ESTE PERIODO DEBE SER CONTINUO OE, ESO ESTABA ARRUINANDO
ggplot(TotalAcreedores, aes(x = Periodo, y = Valor, fill = Acreedor)) +
geom_stream() +
scale_fill_manual(values = cols)+
labs(title = "Flujos de deuda por pais",
subtitle = "(En millones de $us)",
caption  = "Fuente: BCB"
)
#2. agregado por pais  ======================
#importamos los datos oe
df<-import("DeudaOrigen.xlsx") %>% as_tibble()
#Filtramos el pais y botamos otros que se estaba repitiendo
dfacreedor<-df#%>%
#  filter(Acreedor=="CAF")
TotalAcreedores <-aggregate(Valor ~ Periodo+Acreedor, data = dfacreedor, FUN = sum, na.rm = TRUE)
#definimos los colores
#cols <- c('#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd')
cols <- c("#875B52","#E76F51", "#8FA078", "#228176", "#E9C46A", "#59804D", "#F4A261", "#264653", "#BB8865", "#A69B4E", "#65453E", "#E24D28", "#73835D", "#11403B", "#A07918", "#354D2E", "#EF7A1A", "#47829A", "#8E5E3E", "#6F6734", "#902C14", "#3F4833", "#7EDDD3", "#864109", "#274754")
#dibujamos el streamgraph
#OJO ESTE PERIODO DEBE SER CONTINUO OE, ESO ESTABA ARRUINANDO
ggplot(TotalAcreedores, aes(x = Periodo, y = Valor, fill = Acreedor)) +
geom_stream() +
scale_fill_manual(values = cols)+
labs(title = "Flujos de deuda por pais",
subtitle = "(En millones de $us)",
caption  = "Fuente: BCB"
)
+ geom_stream_label(aes(label = Sector))
df<-import("DeudaOrigen.xlsx") %>% as_tibble()
#Filtramos el pais y botamos otros que se estaba repitiendo
dfacreedor<-df#%>%
#  filter(Acreedor=="CAF")
TotalAcreedores <-aggregate(Valor ~ Periodo+Acreedor, data = dfacreedor, FUN = sum, na.rm = TRUE)
#definimos los colores
#cols <- c('#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd')
cols <- c("#875B52","#E76F51", "#8FA078", "#228176", "#E9C46A", "#59804D", "#F4A261", "#264653", "#BB8865", "#A69B4E", "#65453E", "#E24D28", "#73835D", "#11403B", "#A07918", "#354D2E", "#EF7A1A", "#47829A", "#8E5E3E", "#6F6734", "#902C14", "#3F4833", "#7EDDD3", "#864109", "#274754")
#dibujamos el streamgraph
#OJO ESTE PERIODO DEBE SER CONTINUO OE, ESO ESTABA ARRUINANDO
ggplot(TotalAcreedores, aes(x = Periodo, y = Valor, fill = Acreedor)) +
geom_stream() +
scale_fill_manual(values = cols)+
labs(title = "Flujos de deuda por pais",
subtitle = "(En millones de $us)",
caption  = "Fuente: BCB"
)
+ geom_stream_label(aes(label = Sector))
View(TotalAcreedores)
View(TotalAcreedores)
+ geom_stream_label(aes(label = Acreedor))
df<-import("DeudaOrigen.xlsx") %>% as_tibble()
#Filtramos el pais y botamos otros que se estaba repitiendo
dfacreedor<-df#%>%
#  filter(Acreedor=="CAF")
TotalAcreedores <-aggregate(Valor ~ Periodo+Acreedor, data = dfacreedor, FUN = sum, na.rm = TRUE)
#definimos los colores
#cols <- c('#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd')
cols <- c("#875B52","#E76F51", "#8FA078", "#228176", "#E9C46A", "#59804D", "#F4A261", "#264653", "#BB8865", "#A69B4E", "#65453E", "#E24D28", "#73835D", "#11403B", "#A07918", "#354D2E", "#EF7A1A", "#47829A", "#8E5E3E", "#6F6734", "#902C14", "#3F4833", "#7EDDD3", "#864109", "#274754")
#dibujamos el streamgraph
#OJO ESTE PERIODO DEBE SER CONTINUO OE, ESO ESTABA ARRUINANDO
ggplot(TotalAcreedores, aes(x = Periodo, y = Valor, fill = Acreedor)) +
geom_stream() +
scale_fill_manual(values = cols)+
labs(title = "Flujos de deuda por pais",
subtitle = "(En millones de $us)",
caption  = "Fuente: BCB"
)
+ geom_stream_label(aes(label = Acreedor))
df<-import("DeudaOrigen.xlsx") %>% as_tibble()
#Filtramos el pais y botamos otros que se estaba repitiendo
dfacreedor<-df#%>%
#  filter(Acreedor=="CAF")
TotalAcreedores <-aggregate(Valor ~ Periodo+Acreedor, data = dfacreedor, FUN = sum, na.rm = TRUE)
#definimos los colores
#cols <- c('#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd')
cols <- c("#875B52","#E76F51", "#8FA078", "#228176", "#E9C46A", "#59804D", "#F4A261", "#264653", "#BB8865", "#A69B4E", "#65453E", "#E24D28", "#73835D", "#11403B", "#A07918", "#354D2E", "#EF7A1A", "#47829A", "#8E5E3E", "#6F6734", "#902C14", "#3F4833", "#7EDDD3", "#864109", "#274754")
#dibujamos el streamgraph
#OJO ESTE PERIODO DEBE SER CONTINUO OE, ESO ESTABA ARRUINANDO
ggplot(TotalAcreedores, aes(x = Periodo, y = Valor, fill = Acreedor)) +
geom_stream() +
scale_fill_manual(values = cols)+
labs(title = "Flujos de deuda por pais",
subtitle = "(En millones de $us)",
caption  = "Fuente: BCB"
)
#+ geom_stream_label(aes(label = Acreedor))
#importamos los datos oe
df<-import("DeudaOrigen.xlsx") %>% as_tibble()
#Filtramos el pais y botamos otros que se estaba repitiendo
dfacreedor<-df#%>%
#  filter(Acreedor=="CAF")
TotalAcreedores <-aggregate(Valor ~ Periodo+Acreedor, data = dfacreedor, FUN = sum, na.rm = TRUE)
#definimos los colores
#cols <- c('#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd')
cols <- c("#875B52","#E76F51", "#8FA078", "#228176", "#E9C46A", "#59804D", "#F4A261", "#264653", "#BB8865", "#A69B4E", "#65453E", "#E24D28", "#73835D", "#11403B", "#A07918", "#354D2E", "#EF7A1A", "#47829A", "#8E5E3E", "#6F6734", "#902C14", "#3F4833", "#7EDDD3", "#864109", "#274754")
#dibujamos el streamgraph
#OJO ESTE PERIODO DEBE SER CONTINUO OE, ESO ESTABA ARRUINANDO
ggplot(TotalAcreedores, aes(x = Periodo, y = Valor, fill = Acreedor)) +
geom_stream() +
scale_fill_manual(values = cols)+
labs(title = "Flujos de deuda por pais",
subtitle = "(En millones de $us)",
caption  = "Fuente: BCB"
)
#+ geom_stream_label(aes(label = Acreedor))
#Filtramos el pais y botamos otros que se estaba repitiendo
dfacreedor<-df%>%
top_n(10)
#  filter(Acreedor=="CAF")
TotalAcreedores <-aggregate(Valor ~ Periodo+Acreedor, data = dfacreedor, FUN = sum, na.rm = TRUE)
#definimos los colores
#cols <- c('#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd')
cols <- c("#875B52","#E76F51", "#8FA078", "#228176", "#E9C46A", "#59804D", "#F4A261", "#264653", "#BB8865", "#A69B4E", "#65453E", "#E24D28", "#73835D", "#11403B", "#A07918", "#354D2E", "#EF7A1A", "#47829A", "#8E5E3E", "#6F6734", "#902C14", "#3F4833", "#7EDDD3", "#864109", "#274754")
#dibujamos el streamgraph
#OJO ESTE PERIODO DEBE SER CONTINUO OE, ESO ESTABA ARRUINANDO
ggplot(TotalAcreedores, aes(x = Periodo, y = Valor, fill = Acreedor)) +
geom_stream() +
scale_fill_manual(values = cols)+
labs(title = "Flujos de deuda por pais",
subtitle = "(En millones de $us)",
caption  = "Fuente: BCB"
)
#Filtramos el pais y botamos otros que se estaba repitiendo
dfacreedor<-df%>%
top_n(15)
#  filter(Acreedor=="CAF")
TotalAcreedores <-aggregate(Valor ~ Periodo+Acreedor, data = dfacreedor, FUN = sum, na.rm = TRUE)
#definimos los colores
#cols <- c('#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd')
cols <- c("#875B52","#E76F51", "#8FA078", "#228176", "#E9C46A", "#59804D", "#F4A261", "#264653", "#BB8865", "#A69B4E", "#65453E", "#E24D28", "#73835D", "#11403B", "#A07918", "#354D2E", "#EF7A1A", "#47829A", "#8E5E3E", "#6F6734", "#902C14", "#3F4833", "#7EDDD3", "#864109", "#274754")
#dibujamos el streamgraph
#OJO ESTE PERIODO DEBE SER CONTINUO OE, ESO ESTABA ARRUINANDO
ggplot(TotalAcreedores, aes(x = Periodo, y = Valor, fill = Acreedor)) +
geom_stream() +
scale_fill_manual(values = cols)+
labs(title = "Flujos de deuda por pais",
subtitle = "(En millones de $us)",
caption  = "Fuente: BCB"
)
#Filtramos el pais y botamos otros que se estaba repitiendo
dfacreedor<-df%>%
top_n(20)
#  filter(Acreedor=="CAF")
TotalAcreedores <-aggregate(Valor ~ Periodo+Acreedor, data = dfacreedor, FUN = sum, na.rm = TRUE)
#definimos los colores
#cols <- c('#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd')
cols <- c("#875B52","#E76F51", "#8FA078", "#228176", "#E9C46A", "#59804D", "#F4A261", "#264653", "#BB8865", "#A69B4E", "#65453E", "#E24D28", "#73835D", "#11403B", "#A07918", "#354D2E", "#EF7A1A", "#47829A", "#8E5E3E", "#6F6734", "#902C14", "#3F4833", "#7EDDD3", "#864109", "#274754")
#dibujamos el streamgraph
#OJO ESTE PERIODO DEBE SER CONTINUO OE, ESO ESTABA ARRUINANDO
ggplot(TotalAcreedores, aes(x = Periodo, y = Valor, fill = Acreedor)) +
geom_stream() +
scale_fill_manual(values = cols)+
labs(title = "Flujos de deuda por pais",
subtitle = "(En millones de $us)",
caption  = "Fuente: BCB"
)
#Filtramos el pais y botamos otros que se estaba repitiendo
dfacreedor<-df%>%
top_n(25)
#  filter(Acreedor=="CAF")
TotalAcreedores <-aggregate(Valor ~ Periodo+Acreedor, data = dfacreedor, FUN = sum, na.rm = TRUE)
#definimos los colores
#cols <- c('#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd')
cols <- c("#875B52","#E76F51", "#8FA078", "#228176", "#E9C46A", "#59804D", "#F4A261", "#264653", "#BB8865", "#A69B4E", "#65453E", "#E24D28", "#73835D", "#11403B", "#A07918", "#354D2E", "#EF7A1A", "#47829A", "#8E5E3E", "#6F6734", "#902C14", "#3F4833", "#7EDDD3", "#864109", "#274754")
#dibujamos el streamgraph
#OJO ESTE PERIODO DEBE SER CONTINUO OE, ESO ESTABA ARRUINANDO
ggplot(TotalAcreedores, aes(x = Periodo, y = Valor, fill = Acreedor)) +
geom_stream() +
scale_fill_manual(values = cols)+
labs(title = "Flujos de deuda por pais",
subtitle = "(En millones de $us)",
caption  = "Fuente: BCB"
)
#Filtramos el pais y botamos otros que se estaba repitiendo
dfacreedor<-df%>%
top_n(50)
#  filter(Acreedor=="CAF")
TotalAcreedores <-aggregate(Valor ~ Periodo+Acreedor, data = dfacreedor, FUN = sum, na.rm = TRUE)
#definimos los colores
#cols <- c('#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd')
cols <- c("#875B52","#E76F51", "#8FA078", "#228176", "#E9C46A", "#59804D", "#F4A261", "#264653", "#BB8865", "#A69B4E", "#65453E", "#E24D28", "#73835D", "#11403B", "#A07918", "#354D2E", "#EF7A1A", "#47829A", "#8E5E3E", "#6F6734", "#902C14", "#3F4833", "#7EDDD3", "#864109", "#274754")
#dibujamos el streamgraph
#OJO ESTE PERIODO DEBE SER CONTINUO OE, ESO ESTABA ARRUINANDO
ggplot(TotalAcreedores, aes(x = Periodo, y = Valor, fill = Acreedor)) +
geom_stream() +
scale_fill_manual(values = cols)+
labs(title = "Flujos de deuda por pais",
subtitle = "(En millones de $us)",
caption  = "Fuente: BCB"
)
#top_n(50)
#  filter(Acreedor=="CAF")
TotalAcreedores <-aggregate(Valor ~ Periodo+Acreedor, data = dfacreedor, FUN = sum, na.rm = TRUE)
#definimos los colores
#cols <- c('#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd')
cols <- c("#875B52","#E76F51", "#8FA078", "#228176", "#E9C46A", "#59804D", "#F4A261", "#264653", "#BB8865", "#A69B4E", "#65453E", "#E24D28", "#73835D", "#11403B", "#A07918", "#354D2E", "#EF7A1A", "#47829A", "#8E5E3E", "#6F6734", "#902C14", "#3F4833", "#7EDDD3", "#864109", "#274754")
#dibujamos el streamgraph
#OJO ESTE PERIODO DEBE SER CONTINUO OE, ESO ESTABA ARRUINANDO
ggplot(TotalAcreedores, aes(x = Periodo, y = Valor, fill = Acreedor)) +
geom_stream() +
scale_fill_manual(values = cols)+
labs(title = "Flujos de deuda por pais",
subtitle = "(En millones de $us)",
caption  = "Fuente: BCB"
)
#Filtramos el pais y botamos otros que se estaba repitiendo
dfacreedor<-df#%>%
#top_n(50)
#  filter(Acreedor=="CAF")
TotalAcreedores <-aggregate(Valor ~ Periodo+Acreedor, data = dfacreedor, FUN = sum, na.rm = TRUE)
#definimos los colores
#cols <- c('#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd')
cols <- c("#875B52","#E76F51", "#8FA078", "#228176", "#E9C46A", "#59804D", "#F4A261", "#264653", "#BB8865", "#A69B4E", "#65453E", "#E24D28", "#73835D", "#11403B", "#A07918", "#354D2E", "#EF7A1A", "#47829A", "#8E5E3E", "#6F6734", "#902C14", "#3F4833", "#7EDDD3", "#864109", "#274754")
#dibujamos el streamgraph
#OJO ESTE PERIODO DEBE SER CONTINUO OE, ESO ESTABA ARRUINANDO
ggplot(TotalAcreedores, aes(x = Periodo, y = Valor, fill = Acreedor)) +
geom_stream() +
scale_fill_manual(values = cols)+
labs(title = "Flujos de deuda por pais",
subtitle = "(En millones de $us)",
caption  = "Fuente: BCB"
)
#Filtramos el pais y botamos otros que se estaba repitiendo
dfacreedor<-df%>%
order(x,decreasing = TRUE)
#Filtramos el pais y botamos otros que se estaba repitiendo
dfacreedor<-df%>%
order(Valor,decreasing = TRUE)
#Filtramos el pais y botamos otros que se estaba repitiendo
dfacreedor<-df%>%
order(df,decreasing = TRUE)
#top_n(50)
#filter(Acreedor=="CAF")
TotalAcreedores <-aggregate(Valor ~ Periodo+Acreedor, data = dfacreedor, FUN = sum, na.rm = TRUE)
#definimos los colores
#cols <- c('#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd')
cols <- c("#875B52","#E76F51", "#8FA078", "#228176", "#E9C46A", "#59804D", "#F4A261", "#264653", "#BB8865", "#A69B4E", "#65453E", "#E24D28", "#73835D", "#11403B", "#A07918", "#354D2E", "#EF7A1A", "#47829A", "#8E5E3E", "#6F6734", "#902C14", "#3F4833", "#7EDDD3", "#864109", "#274754")
#dibujamos el streamgraph
#OJO ESTE PERIODO DEBE SER CONTINUO OE, ESO ESTABA ARRUINANDO
ggplot(TotalAcreedores, aes(x = Periodo, y = Valor, fill = Acreedor)) +
geom_stream() +
scale_fill_manual(values = cols)+
labs(title = "Flujos de deuda por pais",
subtitle = "(En millones de $us)",
caption  = "Fuente: BCB"
)
#Filtramos el pais y botamos otros que se estaba repitiendo
dfacreedor<-df%>%
sort(Valor)
arrange(Valor(desc())
#top_n(50)
#filter(Acreedor=="CAF")
TotalAcreedores <-aggregate(Valor ~ Periodo+Acreedor, data = dfacreedor, FUN = sum, na.rm = TRUE)
#definimos los colores
#cols <- c('#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd')
cols <- c("#875B52","#E76F51", "#8FA078", "#228176", "#E9C46A", "#59804D", "#F4A261", "#264653", "#BB8865", "#A69B4E", "#65453E", "#E24D28", "#73835D", "#11403B", "#A07918", "#354D2E", "#EF7A1A", "#47829A", "#8E5E3E", "#6F6734", "#902C14", "#3F4833", "#7EDDD3", "#864109", "#274754")
#dibujamos el streamgraph
#OJO ESTE PERIODO DEBE SER CONTINUO OE, ESO ESTABA ARRUINANDO
ggplot(TotalAcreedores, aes(x = Periodo, y = Valor, fill = Acreedor)) +
geom_stream() +
scale_fill_manual(values = cols)+
labs(title = "Flujos de deuda por pais",
subtitle = "(En millones de $us)",
caption  = "Fuente: BCB"
)
#Filtramos el pais y botamos otros que se estaba repitiendo
dfacreedor<-df#%>%
#top_n(50)
#top_n(50)
#filter(Acreedor=="CAF")
TotalAcreedores <-aggregate(Valor ~ Periodo+Acreedor, data = dfacreedor, FUN = sum, na.rm = TRUE)%>%
#definimos los colores
#cols <- c('#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd')
cols <- c("#875B52","#E76F51", "#8FA078", "#228176", "#E9C46A", "#59804D", "#F4A261", "#264653", "#BB8865", "#A69B4E", "#65453E", "#E24D28", "#73835D", "#11403B", "#A07918", "#354D2E", "#EF7A1A", "#47829A", "#8E5E3E", "#6F6734", "#902C14", "#3F4833", "#7EDDD3", "#864109", "#274754")
#dibujamos el streamgraph
#OJO ESTE PERIODO DEBE SER CONTINUO OE, ESO ESTABA ARRUINANDO
ggplot(TotalAcreedores, aes(x = Periodo, y = Valor, fill = Acreedor)) +
geom_stream() +
scale_fill_manual(values = cols)+
labs(title = "Flujos de deuda por pais",
subtitle = "(En millones de $us)",
caption  = "Fuente: BCB"
)
#top_n(50)
#filter(Acreedor=="CAF")
TotalAcreedores <-aggregate(Valor ~ Periodo+Acreedor, data = dfacreedor, FUN = sum, na.rm = TRUE)
TotalAcreedores%>%
#definimos los colores
#cols <- c('#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd')
cols <- c("#875B52","#E76F51", "#8FA078", "#228176", "#E9C46A", "#59804D", "#F4A261", "#264653", "#BB8865", "#A69B4E", "#65453E", "#E24D28", "#73835D", "#11403B", "#A07918", "#354D2E", "#EF7A1A", "#47829A", "#8E5E3E", "#6F6734", "#902C14", "#3F4833", "#7EDDD3", "#864109", "#274754")
#Filtramos el pais y botamos otros que se estaba repitiendo
dfacreedor<-df#%>%
#top_n(50)
#filter(Acreedor=="CAF")
TotalAcreedores <-aggregate(Valor ~ Periodo+Acreedor, data = dfacreedor, FUN = sum, na.rm = TRUE)
#definimos los colores
#cols <- c('#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd')
cols <- c("#875B52","#E76F51", "#8FA078", "#228176", "#E9C46A", "#59804D", "#F4A261", "#264653", "#BB8865", "#A69B4E", "#65453E", "#E24D28", "#73835D", "#11403B", "#A07918", "#354D2E", "#EF7A1A", "#47829A", "#8E5E3E", "#6F6734", "#902C14", "#3F4833", "#7EDDD3", "#864109", "#274754")
#dibujamos el streamgraph
#OJO ESTE PERIODO DEBE SER CONTINUO OE, ESO ESTABA ARRUINANDO
ggplot(TotalAcreedores, aes(x = Periodo, y = Valor, fill = Acreedor)) +
geom_stream() +
scale_fill_manual(values = cols)+
labs(title = "Flujos de deuda por pais",
subtitle = "(En millones de $us)",
caption  = "Fuente: BCB"
)
View(TotalAcreedores)
View(TotalAcreedores)
#Filtramos el pais y botamos otros que se estaba repitiendo
dfacreedor<-df%>%
filter(Acreedor=="CAF"|Acreedor=="BID"|Acreedor=="PRIV"|Acreedor=="China"|Acreedor=="IDA"|Acreedor=="PDVSA")
df<-import("DeudaOrigen.xlsx") %>% as_tibble()
#Filtramos el pais y botamos otros que se estaba repitiendo
dfacreedor<-df%>%
filter(Acreedor=="CAF"|Acreedor=="BID"|Acreedor=="PRIV"|Acreedor=="China"|Acreedor=="IDA"|Acreedor=="PDVSA")
TotalAcreedores <-aggregate(Valor ~ Periodo+Acreedor, data = dfacreedor, FUN = sum, na.rm = TRUE)
#definimos los colores
#cols <- c('#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd')
cols <- c("#875B52","#E76F51", "#8FA078", "#228176", "#E9C46A", "#59804D", "#F4A261", "#264653", "#BB8865", "#A69B4E", "#65453E", "#E24D28", "#73835D", "#11403B", "#A07918", "#354D2E", "#EF7A1A", "#47829A", "#8E5E3E", "#6F6734", "#902C14", "#3F4833", "#7EDDD3", "#864109", "#274754")
#dibujamos el streamgraph
#OJO ESTE PERIODO DEBE SER CONTINUO OE, ESO ESTABA ARRUINANDO
ggplot(TotalAcreedores, aes(x = Periodo, y = Valor, fill = Acreedor)) +
geom_stream() +
scale_fill_manual(values = cols)+
labs(title = "Flujos de deuda por pais",
subtitle = "(En millones de $us)",
caption  = "Fuente: BCB"
)
#+ geom_stream_label(aes(label = Acreedor))
#Filtramos el pais y botamos otros que se estaba repitiendo
dfacreedor<-df%>%
filter(Acreedor=="CAF"|Acreedor=="BID"|Acreedor=="PRIV"|Acreedor=="China"|Acreedor=="IDA"|Acreedor=="PDVSA"|
Acreedor=="FONPLATA"|Acreedor=="AFD"|Acreedor=="BIRF"|Acreedor=="OPEP"|Acreedor=="PROEX BRASIL"|Acreedor=="FIDA")
TotalAcreedores <-aggregate(Valor ~ Periodo+Acreedor, data = dfacreedor, FUN = sum, na.rm = TRUE)
#definimos los colores
#cols <- c('#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd')
cols <- c("#875B52","#E76F51", "#8FA078", "#228176", "#E9C46A", "#59804D", "#F4A261", "#264653", "#BB8865", "#A69B4E", "#65453E", "#E24D28", "#73835D", "#11403B", "#A07918", "#354D2E", "#EF7A1A", "#47829A", "#8E5E3E", "#6F6734", "#902C14", "#3F4833", "#7EDDD3", "#864109", "#274754")
#dibujamos el streamgraph
#OJO ESTE PERIODO DEBE SER CONTINUO OE, ESO ESTABA ARRUINANDO
ggplot(TotalAcreedores, aes(x = Periodo, y = Valor, fill = Acreedor)) +
geom_stream() +
scale_fill_manual(values = cols)+
labs(title = "Flujos de deuda por pais",
subtitle = "(En millones de $us)",
caption  = "Fuente: BCB"
)
#Filtramos el pais y botamos otros que se estaba repitiendo
dfacreedor<-df#%>%
#  filter(Acreedor=="CAF"|Acreedor=="BID"|Acreedor=="PRIV"|Acreedor=="China"|Acreedor=="IDA"|Acreedor=="PDVSA"|
#Acreedor=="FONPLATA"|Acreedor=="AFD"|Acreedor=="BIRF"|Acreedor=="OPEP"|Acreedor=="PROEX BRASIL"|Acreedor=="FIDA")
TotalAcreedores <-aggregate(Valor ~ Periodo+Acreedor, data = dfacreedor, FUN = sum, na.rm = TRUE)
#definimos los colores
#cols <- c('#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd')
cols <- c("#875B52","#E76F51", "#8FA078", "#228176", "#E9C46A", "#59804D", "#F4A261", "#264653", "#BB8865", "#A69B4E", "#65453E", "#E24D28", "#73835D", "#11403B", "#A07918", "#354D2E", "#EF7A1A", "#47829A", "#8E5E3E", "#6F6734", "#902C14", "#3F4833", "#7EDDD3", "#864109", "#274754")
#dibujamos el streamgraph
#OJO ESTE PERIODO DEBE SER CONTINUO OE, ESO ESTABA ARRUINANDO
ggplot(TotalAcreedores, aes(x = Periodo, y = Valor, fill = Acreedor)) +
geom_stream() +
scale_fill_manual(values = cols)+
labs(title = "Flujos de deuda por pais",
subtitle = "(En millones de $us)",
caption  = "Fuente: BCB"
)
pacman::p_load(pacman,party,rio,tidyverse)
#install("ggstream")
install.packages("ggstream")
library(ggstream)
#1. por sector dado un Acreedor===============================================
#importamos los datos oe
df<-import("DeudaOrigen.xlsx") %>% as_tibble()
#Filtramos el pais y botamos otros que se estaba repitiendo
dfacreedor<-df%>%
filter(Acreedor=="CAF")
#definimos los colores
cols <- c('#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd')
#dibujamos el streamgraph
#OJO ESTE PERIODO DEBE SER CONTINUO OE, ESO ESTABA ARRUINANDO
ggplot(dfacreedor, aes(x = Periodo, y = Valor, fill = Sector)) +
geom_stream() +
scale_fill_manual(values = cols)+
labs(title = "Desembolsos de España",
subtitle = "(En millones de $us)",
caption  = "Fuente: BCB"
)
# + geom_stream_label(aes(label = Sector))
install.packages("ggstream")
df<-import("DeudaOrigen.xlsx") %>% as_tibble()
#Filtramos el pais y botamos otros que se estaba repitiendo
dfacreedor<-df%>%
filter(Acreedor=="CAF")
#definimos los colores
cols <- c("#875B52","#E76F51", "#8FA078", "#228176", "#E9C46A", "#59804D", "#F4A261", "#264653", "#BB8865", "#A69B4E", "#65453E", "#E24D28", "#73835D", "#11403B", "#A07918", "#354D2E", "#EF7A1A", "#47829A", "#8E5E3E", "#6F6734", "#902C14", "#3F4833", "#7EDDD3", "#864109", "#274754")
#cols <- c('#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462','#b3de69','#fccde5','#d9d9d9','#bc80bd')
#dibujamos el streamgraph
#OJO ESTE PERIODO DEBE SER CONTINUO OE, ESO ESTABA ARRUINANDO
ggplot(dfacreedor, aes(x = Periodo, y = Valor, fill = Sector)) +
geom_stream() +
scale_fill_manual(values = cols)+
labs(title = "Desembolsos de España",
subtitle = "(En millones de $us)",
caption  = "Fuente: BCB"
)
#Filtramos el pais y botamos otros que se estaba repitiendo
dfacreedor<-df%>%
filter(Acreedor=="BID")
#definimos los colores
cols <- c("#875B52","#E76F51", "#8FA078", "#228176", "#E9C46A", "#59804D", "#F4A261", "#264653", "#BB8865", "#A69B4E", "#65453E", "#E24D28", "#73835D", "#11403B", "#A07918", "#354D2E", "#EF7A1A", "#47829A", "#8E5E3E", "#6F6734", "#902C14", "#3F4833", "#7EDDD3", "#864109", "#274754")
#dibujamos el streamgraph
#OJO ESTE PERIODO DEBE SER CONTINUO OE, ESO ESTABA ARRUINANDO
ggplot(dfacreedor, aes(x = Periodo, y = Valor, fill = Sector)) +
geom_stream() +
scale_fill_manual(values = cols)+
labs(title = "Desembolsos de España",
subtitle = "(En millones de $us)",
caption  = "Fuente: BCB"
)
#Filtramos el pais y botamos otros que se estaba repitiendo
dfacreedor<-df%>%
filter(Acreedor=="China")
#definimos los colores
cols <- c("#875B52","#E76F51", "#8FA078", "#228176", "#E9C46A", "#59804D", "#F4A261", "#264653", "#BB8865", "#A69B4E", "#65453E", "#E24D28", "#73835D", "#11403B", "#A07918", "#354D2E", "#EF7A1A", "#47829A", "#8E5E3E", "#6F6734", "#902C14", "#3F4833", "#7EDDD3", "#864109", "#274754")
#dibujamos el streamgraph
#OJO ESTE PERIODO DEBE SER CONTINUO OE, ESO ESTABA ARRUINANDO
ggplot(dfacreedor, aes(x = Periodo, y = Valor, fill = Sector)) +
geom_stream() +
scale_fill_manual(values = cols)+
labs(title = "Desembolsos de España",
subtitle = "(En millones de $us)",
caption  = "Fuente: BCB"
)
#Filtramos el pais y botamos otros que se estaba repitiendo
dfacreedor<-df%>%
filter(Acreedor=="IDA")
#definimos los colores
cols <- c("#875B52","#E76F51", "#8FA078", "#228176", "#E9C46A", "#59804D", "#F4A261", "#264653", "#BB8865", "#A69B4E", "#65453E", "#E24D28", "#73835D", "#11403B", "#A07918", "#354D2E", "#EF7A1A", "#47829A", "#8E5E3E", "#6F6734", "#902C14", "#3F4833", "#7EDDD3", "#864109", "#274754")
#dibujamos el streamgraph
#OJO ESTE PERIODO DEBE SER CONTINUO OE, ESO ESTABA ARRUINANDO
ggplot(dfacreedor, aes(x = Periodo, y = Valor, fill = Sector)) +
geom_stream() +
scale_fill_manual(values = cols)+
labs(title = "Desembolsos de España",
subtitle = "(En millones de $us)",
caption  = "Fuente: BCB"
)
